# Kamado

[![npm version](https://badge.fury.io/js/kamado.svg)](https://www.npmjs.com/package/kamado)

![kamado](https://cdn.jsdelivr.net/gh/d-zero-dev/kamado@main/assets/kamado_logo.png)

**Kamadoã¯æ¥µã‚ã¦ã‚·ãƒ³ãƒ—ãƒ«ãªé™çš„ã‚µã‚¤ãƒˆãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚** ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãªã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãªã—ã€ãƒã‚¸ãƒƒã‚¯ãªã—ã€‚**ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ä¸è¦**ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¨ç”Ÿã®HTMLã ã‘ã€‚ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ã§ç„¼ãä¸Šã’ã¾ã™ã€‚ã‹ã¾ã©ã§ã˜ã£ãã‚Šç„¼ãä¸Šã’ã‚‹ã€ãã‚ŒãŒKamadoã§ã™ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

- ğŸ—ï¸ [Kamado Architecture](./ARCHITECTURE.md) | [å†…éƒ¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](./ARCHITECTURE.ja.md)

Kamadoã¯11tyã«ä¼¼ãŸé™çš„ã‚µã‚¤ãƒˆãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€ã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ãªè¨­è¨ˆã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚ãƒ¬ã‚¬ã‚·ãƒ¼ãªå¤ã„ä½œã‚Šæ–¹ã«ã“ã ã‚ã‚‹äººå‘ã‘ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

**Kamadoã®æœ€å¤§ã®ç‰¹å¾´ã¯ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ä¸€åˆ‡å¿…è¦ã¨ã—ãªã„ã“ã¨ã§ã™ã€‚** ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ï¼ˆãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã¯ä¸è¦ã§ã™ã€‚ç´”ç²‹ãªé™çš„HTMLã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã€æ°¸ç¶šæ€§ã¨å …ç‰¢æ€§ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚10å¹´å¾Œã€20å¹´å¾Œã‚‚åŒã˜ã‚ˆã†ã«å‹•ä½œã™ã‚‹HTMLã‚’ç”Ÿæˆã—ã¾ã™ã€‚

Astroã‚„Next.jsã®ã‚ˆã†ãªãƒ¢ãƒ€ãƒ³ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’å¿…è¦ã¨ã—ã¾ã™ã€‚Kamadoã¯ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«ä¾å­˜ã›ãšã€ç´”ç²‹ãªé™çš„HTMLã‚’ç”Ÿæˆã—ã¾ã™ã€‚ãƒ¬ã‚¬ã‚·ãƒ¼ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å¥½ã‚€é–‹ç™ºè€…ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«ä¾å­˜ã—ãŸããªã„é–‹ç™ºè€…å‘ã‘ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

## ä¸»ãªç‰¹å¾´

### ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ä¸è¦

Kamadoã®æœ€å¤§ã®ç‰¹å¾´ã¯ã€**ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ä¸€åˆ‡å¿…è¦ã¨ã—ãªã„**ã“ã¨ã§ã™ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ï¼ˆãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã¯ä¸è¦ã§ã™ã€‚ç”Ÿæˆã•ã‚Œã‚‹ã®ã¯ç´”ç²‹ãªé™çš„HTMLã ã‘ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ°¸ç¶šæ€§ã¨å …ç‰¢æ€§ãŒä¿è¨¼ã•ã‚Œã¾ã™ã€‚ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒƒãƒã«æ‚©ã¾ã•ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚

### esbuild/viteã¨ã®ä½µç”¨

CSSã¨JavaScriptã¯esbuildã‚„viteã«ä»»ã›ã€Kamadoã¯HTMLã®ç®¡ç†ã«å°‚å¿µã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å„ãƒ„ãƒ¼ãƒ«ã®å¼·ã¿ã‚’æ´»ã‹ã—ãŸé–‹ç™ºãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

### ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰æ–¹å¼

é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã§ã¯ã€ã‚¢ã‚¯ã‚»ã‚¹ãŒã‚ã£ãŸã¨ãã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰æ–¹å¼ã«ã‚ˆã‚Šã€10000ãƒšãƒ¼ã‚¸ã®ã‚µã‚¤ãƒˆã§ã‚‚å¿«é©ã«å‹•ä½œã—ã¾ã™ã€‚å¿…è¦ãªåˆ†ã ã‘ç„¼ãã€ç„¡é§„ã®ãªã„è¨­è¨ˆã§ã™ã€‚

### å¤§è¦æ¨¡ã‚µã‚¤ãƒˆå¯¾å¿œ

ãƒšãƒ¼ã‚¸ãƒ„ãƒªãƒ¼ã«ã‚ˆã‚‹ãƒãƒƒãƒ”ãƒ³ã‚°ç®¡ç†ã«ã‚ˆã‚Šã€å¤§è¦æ¨¡ã‚µã‚¤ãƒˆã§ã‚‚åŠ¹ç‡çš„ã«ãƒ“ãƒ«ãƒ‰ã§ãã¾ã™ã€‚

### å……å®Ÿã—ãŸãƒ­ã‚°å‡ºåŠ›ã¨ä¸¦åˆ—ãƒ“ãƒ«ãƒ‰

Kamadoã¯ä¸¦åˆ—ãƒ“ãƒ«ãƒ‰å‡¦ç†ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚ãƒ“ãƒ«ãƒ‰ä¸­ã¯ä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã‹ãŒã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã—ã£ã‹ã‚Šã¨å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚å„ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ“ãƒ«ãƒ‰çŠ¶æ³ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç¢ºèªã§ãã€é€²æ—çŠ¶æ³ã‚‚ä¸€ç›®ç­ç„¶ã§ã™ã€‚ä¸¦åˆ—å‡¦ç†ã«ã‚ˆã‚Šã€ãƒ“ãƒ«ãƒ‰é€Ÿåº¦ã‚‚å‘ä¸Šã—ã¾ã™ã€‚

## é–‹ç™ºã‚µãƒ¼ãƒãƒ¼

### Honoãƒ™ãƒ¼ã‚¹ã®è»½é‡ã‚µãƒ¼ãƒãƒ¼

**ã‹ã¾ã©ã«ãã¹ã‚‹ã®ã¯Honoã ã‚ğŸ”¥**

### ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰æ–¹å¼

ã‚µãƒ¼ãƒãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒãƒ‡ã‚£ã‚¹ãƒ†ã‚£ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¹ã¨ãƒãƒƒãƒã™ã‚Œã°ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’èµ·ç‚¹ã«èŠ‹ã¥ã‚‹å¼ã«ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚ä¾å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ç›£è¦–ã™ã‚‹å¿…è¦ãªãã€å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ãŒè‡ªå‹•çš„ã«ãƒ“ãƒ«ãƒ‰ã•ã‚Œã¾ã™ã€‚

### ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ãªã—

`Chokidar`ã‚‚ä½¿ã‚ãšã€ãƒ©ã‚¤ãƒ–ãƒªãƒ­ãƒ¼ãƒ‰ã‚‚ã—ã¾ã›ã‚“ã€‚é–‹ç™ºæ™‚ã¯ã‚ãã¾ã§ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒªãƒ­ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã¿ãŒãƒ“ãƒ«ãƒ‰ã®ãƒˆãƒªã‚¬ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚

### ãƒšãƒ¼ã‚¸ãƒ„ãƒªãƒ¼ã«ã‚ˆã‚‹ãƒãƒƒãƒ”ãƒ³ã‚°ç®¡ç†

ãƒšãƒ¼ã‚¸ãƒ„ãƒªãƒ¼ã¯ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã¨ãƒ‡ã‚£ã‚¹ãƒ†ã‚£ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¹ã‚’æŒã¡ã¾ã™ã€‚ã“ã®æ™‚ç‚¹ã§ãƒãƒƒãƒ”ãƒ³ã‚°ãŒç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã‚µãƒ¼ãƒãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒãƒ‡ã‚£ã‚¹ãƒ†ã‚£ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¹ã¨ãƒãƒƒãƒã™ã‚Œã°ã€ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’ãƒ“ãƒ«ãƒ‰ã§ãã¾ã™ã€‚

## åŸºæœ¬çš„ãªä½¿ã„æ–¹

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install kamado
# ã¾ãŸã¯
yarn add kamado
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«`kamado.config.ts`ã‚’ä½œæˆã—ã¾ã™ï¼š

```ts
import path from 'node:path';

import { defineConfig } from 'kamado/config';
import { createPageCompiler } from '@kamado-io/page-compiler';
import { createScriptCompiler } from '@kamado-io/script-compiler';
import { createStyleCompiler } from '@kamado-io/style-compiler';

export default defineConfig({
	dir: {
		root: import.meta.dirname,
		input: path.resolve(import.meta.dirname, '__assets', 'htdocs'),
		output: path.resolve(import.meta.dirname, 'htdocs'),
	},
	devServer: {
		open: true,
		port: 8000,
	},
	compilers: (def) => [
		def(createPageCompiler(), {
			files: '**/*.{html,pug}',
			outputExtension: '.html',
			globalData: {
				dir: path.resolve(import.meta.dirname, '__assets', '_libs', 'data'),
			},
			layouts: {
				dir: path.resolve(import.meta.dirname, '__assets', '_libs', 'layouts'),
			},
			// Transform ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€çœç•¥æ™‚ã¯ createDefaultPageTransforms() ã‚’ä½¿ç”¨ï¼‰
			// ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã«ã¤ã„ã¦ã¯ @kamado-io/page-compiler ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„
		}),
		def(createStyleCompiler(), {
			files: '**/*.{css,scss,sass}',
			ignore: '**/*.{scss,sass}',
			outputExtension: '.css',
			alias: {
				'@': path.resolve(import.meta.dirname, '__assets', '_libs'),
			},
		}),
		def(createScriptCompiler(), {
			files: '**/*.{js,ts,jsx,tsx,mjs,cjs}',
			outputExtension: '.js',
			minifier: true,
			alias: {
				'@': path.resolve(import.meta.dirname, '__assets', '_libs'),
			},
		}),
	],
	async onBeforeBuild(context) {
		// ãƒ“ãƒ«ãƒ‰å‰ã®å‡¦ç†
		// context.mode ãŒåˆ©ç”¨å¯èƒ½: 'build' ã¾ãŸã¯ 'serve'
	},
	async onAfterBuild(context) {
		// ãƒ“ãƒ«ãƒ‰å¾Œã®å‡¦ç†
		// context.mode ãŒåˆ©ç”¨å¯èƒ½: 'build' ã¾ãŸã¯ 'serve'
	},
});
```

### è¨­å®šé …ç›®ã®èª¬æ˜

#### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè¨­å®š

- `dir.root`: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- `dir.input`: ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- `dir.output`: å‡ºåŠ›å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

#### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼è¨­å®š

- `devServer.port`: ã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ãƒˆç•ªå·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `3000`ï¼‰
- `devServer.host`: ã‚µãƒ¼ãƒãƒ¼ã®ãƒ›ã‚¹ãƒˆåï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `localhost`ï¼‰
- `devServer.open`: èµ·å‹•æ™‚ã«ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è‡ªå‹•ã§é–‹ãã‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `false`ï¼‰
- `devServer.startPath`: ã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ™‚ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã‚«ã‚¹ã‚¿ãƒ ãƒ‘ã‚¹ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€ä¾‹: `'__tmpl/'`ï¼‰
- `devServer.transforms`: é–‹ç™ºæ™‚ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å¤‰æ›ã™ã‚‹é–¢æ•°ã®é…åˆ—ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€[ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¤‰æ›API](#ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¤‰æ›api)ã‚’å‚ç…§ï¼‰

#### ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©è¨­å®š

`compilers`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯å‹å®‰å…¨ãªã‚³ãƒ³ãƒ‘ã‚¤ãƒ©è¨­å®šã®ãŸã‚ã«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å½¢å¼ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¯`def`ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’å—ã‘å–ã‚Šã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãƒ•ã‚¡ã‚¯ãƒˆãƒªã¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ãƒã‚¤ãƒ³ãƒ‰ã—ã¾ã™ã€‚å„`def(factory(), options)`å‘¼ã³å‡ºã—ã¯ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»˜ãã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚’è¿”ã—ã¾ã™ã€‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã‚’å«ã¿ã¾ã™ï¼š

- `files`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®globãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯`dir.input`ã‚’åŸºæº–ã«è§£æ±ºã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯å„ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§æä¾›ã•ã‚Œã¾ã™ï¼ˆä¸‹è¨˜å‚ç…§ï¼‰ã€‚
- `ignore`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‹ã‚‰é™¤å¤–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®globãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯`dir.input`ã‚’åŸºæº–ã«è§£æ±ºã•ã‚Œã¾ã™ã€‚ä¾‹ãˆã°ã€`'**/*.scss'`ã¨æŒ‡å®šã™ã‚‹ã¨ã€å…¥åŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ãã®ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ã™ã¹ã¦ã®`.scss`ãƒ•ã‚¡ã‚¤ãƒ«ãŒç„¡è¦–ã•ã‚Œã¾ã™ã€‚
- `outputExtension`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­ï¼ˆä¾‹: `.html`, `.css`, `.js`, `.php`ï¼‰ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯å„ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§æä¾›ã•ã‚Œã¾ã™ï¼ˆä¸‹è¨˜å‚ç…§ï¼‰ã€‚
- ãã®ä»–ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©å›ºæœ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆå„ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ï¼‰ã€‚

è¿”å´ã•ã‚Œã‚‹é…åˆ—ã®é †åºãŒå‡¦ç†é †åºã‚’æ±ºå®šã—ã¾ã™ã€‚

##### createPageCompiler

- `files`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®globãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯`dir.input`ã‚’åŸºæº–ã«è§£æ±ºã•ã‚Œã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `'**/*.html'`ï¼‰
- `ignore`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‹ã‚‰é™¤å¤–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®globãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯`dir.input`ã‚’åŸºæº–ã«è§£æ±ºã•ã‚Œã¾ã™ã€‚ä¾‹ãˆã°ã€`'**/*.tmp'`ã¨æŒ‡å®šã™ã‚‹ã¨ã€ã™ã¹ã¦ã®`.tmp`ãƒ•ã‚¡ã‚¤ãƒ«ãŒç„¡è¦–ã•ã‚Œã¾ã™
- `outputExtension`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `'.html'`ï¼‰
- `globalData.dir`: ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- `globalData.data`: è¿½åŠ ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ãƒ¼ã‚¿
- `layouts.dir`: ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- `compileHooks`: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒ•ãƒƒã‚¯ï¼ˆPugãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯å¿…é ˆï¼‰
- `transforms`: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ¸ˆã¿HTMLã«é©ç”¨ã™ã‚‹å¤‰æ›é–¢æ•°ã®é…åˆ—ã€‚çœç•¥æ™‚ã¯`createDefaultPageTransforms()`ã‚’ä½¿ç”¨ã€‚Transform Pipeline APIã®è©³ç´°ã¯[@kamado-io/page-compiler](../packages/@kamado-io/page-compiler/README.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„

**æ³¨æ„**: `page-compiler`ã¯æ±ç”¨ã‚³ãƒ³ãƒ†ãƒŠã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§ã‚ã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯Pugãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¾ã›ã‚“ã€‚Pugãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€`@kamado-io/pug-compiler`ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€`compileHooks`ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚è©³ç´°ã¯[@kamado-io/pug-compiler README](../@kamado-io/pug-compiler/README.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

**ä¾‹**: `.pug`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`.html`ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹å ´åˆï¼š

```ts
def(createPageCompiler(), {
	files: '**/*.pug',
	outputExtension: '.html',
	compileHooks: {
		main: {
			compiler: compilePug(),
		},
	},
});
```

##### createStyleCompiler

- `files`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®globãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯`dir.input`ã‚’åŸºæº–ã«è§£æ±ºã•ã‚Œã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `'**/*.css'`ï¼‰
- `ignore`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‹ã‚‰é™¤å¤–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®globãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯`dir.input`ã‚’åŸºæº–ã«è§£æ±ºã•ã‚Œã¾ã™ã€‚ä¾‹ãˆã°ã€`'**/*.{scss,sass}'`ã¨æŒ‡å®šã™ã‚‹ã¨ã€ã™ã¹ã¦ã®`.scss`ã¨`.sass`ãƒ•ã‚¡ã‚¤ãƒ«ãŒç„¡è¦–ã•ã‚Œã¾ã™
- `outputExtension`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `'.css'`ï¼‰
- `alias`: ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®ãƒãƒƒãƒ—ï¼ˆPostCSSã®`@import`ã§ä½¿ç”¨ï¼‰
- `banner`: ãƒãƒŠãƒ¼è¨­å®šï¼ˆCreateBanneré–¢æ•°ã¾ãŸã¯æ–‡å­—åˆ—ã‚’æŒ‡å®šå¯èƒ½ï¼‰

**ä¾‹**: `.scss`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`.css`ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã€ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç„¡è¦–ã™ã‚‹å ´åˆï¼š

```ts
def(createStyleCompiler(), {
	files: '**/*.{css,scss,sass}',
	ignore: '**/*.{scss,sass}',
	outputExtension: '.css',
	alias: {
		'@': path.resolve(import.meta.dirname, '__assets', '_libs'),
	},
});
```

##### createScriptCompiler

- `files`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®globãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯`dir.input`ã‚’åŸºæº–ã«è§£æ±ºã•ã‚Œã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `'**/*.{js,ts,jsx,tsx,mjs,cjs}'`ï¼‰
- `ignore`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‹ã‚‰é™¤å¤–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®globãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯`dir.input`ã‚’åŸºæº–ã«è§£æ±ºã•ã‚Œã¾ã™ã€‚ä¾‹ãˆã°ã€`'**/*.test.ts'`ã¨æŒ‡å®šã™ã‚‹ã¨ã€ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒç„¡è¦–ã•ã‚Œã¾ã™
- `outputExtension`ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰: å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `'.js'`ï¼‰
- `alias`: ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®ãƒãƒƒãƒ—ï¼ˆesbuildã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼‰
- `minifier`: ãƒŸãƒ‹ãƒ•ã‚¡ã‚¤ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹
- `banner`: ãƒãƒŠãƒ¼è¨­å®šï¼ˆCreateBanneré–¢æ•°ã¾ãŸã¯æ–‡å­—åˆ—ã‚’æŒ‡å®šå¯èƒ½ï¼‰

**ä¾‹**: TypeScriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’JavaScriptã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹å ´åˆï¼š

```ts
def(createScriptCompiler(), {
	files: '**/*.{js,ts,jsx,tsx}',
	outputExtension: '.js',
	minifier: true,
	alias: {
		'@': path.resolve(import.meta.dirname, '__assets', '_libs'),
	},
});
```

#### ãƒšãƒ¼ã‚¸ãƒªã‚¹ãƒˆè¨­å®š

`pageList`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆã€ãã®ä»–ãƒšãƒ¼ã‚¸ãƒªã‚¹ãƒˆã‚’å¿…è¦ã¨ã™ã‚‹æ©Ÿèƒ½ã§ä½¿ç”¨ã•ã‚Œã‚‹ãƒšãƒ¼ã‚¸ãƒªã‚¹ãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚

```ts
import { defineConfig } from 'kamado/config';
import { urlToFile, getFile } from 'kamado/files';

export default defineConfig({
	// ... ãã®ä»–ã®è¨­å®š
	pageList: async (pageAssetFiles, config) => {
		// ãƒšãƒ¼ã‚¸ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆä¾‹: ä¸‹æ›¸ãã‚’é™¤å¤–ï¼‰
		const filtered = pageAssetFiles.filter((page) => !page.url.includes('/drafts/'));

		// ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»˜ãã®å¤–éƒ¨ãƒšãƒ¼ã‚¸ã‚’è¿½åŠ 
		const externalPage = {
			...urlToFile('/external-page/', {
				inputDir: config.dir.input,
				outputDir: config.dir.output,
				outputExtension: '.html',
			}),
			metaData: { title: 'å¤–éƒ¨ãƒšãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒˆãƒ«' },
		};

		return [...filtered, externalPage];
	},
});
```

ã“ã®é–¢æ•°ã¯ä»¥ä¸‹ã‚’å—ã‘å–ã‚Šã¾ã™ï¼š

- `pageAssetFiles`: ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã§è¦‹ã¤ã‹ã£ãŸã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ãƒ•ã‚¡ã‚¤ãƒ«ã®é…åˆ—
- `config`: å®Œå…¨ãªè¨­å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

`PageData`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ`CompilableFile`ã‚’æ‹¡å¼µã—ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§`metaData`ã‚’å«ã‚€ï¼‰ã®é…åˆ—ã‚’è¿”ã—ã¾ã™ã€‚

**`metaData`ã¨ã‚¿ã‚¤ãƒˆãƒ«ã«é–¢ã™ã‚‹æ³¨æ„:**

- å„ãƒšãƒ¼ã‚¸ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ã¯ã€`metaData`ã¯ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã‹ã‚‰è‡ªå‹•çš„ã«å±•é–‹ã•ã‚Œã¾ã™
- ãŸã ã—ã€`pageList`ãƒ•ãƒƒã‚¯æ™‚ç‚¹ï¼ˆglobalDataåé›†æ™‚ï¼‰ã§ã¯ã€`metaData`ã¯ã¾ã å±•é–‹ã•ã‚Œã¦ã„ã¾ã›ã‚“
- ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆã‚„ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚¿ã‚¤ãƒˆãƒ«ãŒå¿…è¦ãªå ´åˆã¯ã€`pageList`ãƒ•ãƒƒã‚¯ã§æ˜ç¤ºçš„ã«`metaData.title`ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
- æ˜ç¤ºçš„ãª`metaData.title`ãŒãªã„å ´åˆã€ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆã‚„ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯`__NO_TITLE__`ã¨è¡¨ç¤ºã•ã‚Œã¾ã™

#### ãƒ•ãƒƒã‚¯é–¢æ•°

- `onBeforeBuild`: ãƒ“ãƒ«ãƒ‰å‰ã«å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°ã€‚`Context`ï¼ˆ`Config`ã‚’æ‹¡å¼µã—`mode: 'build' | 'serve'`ã‚’å«ã‚€ï¼‰ã‚’å—ã‘å–ã‚Šã¾ã™
- `onAfterBuild`: ãƒ“ãƒ«ãƒ‰å¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°ã€‚`Context`ï¼ˆ`Config`ã‚’æ‹¡å¼µã—`mode: 'build' | 'serve'`ã‚’å«ã‚€ï¼‰ã‚’å—ã‘å–ã‚Šã¾ã™

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¤‰æ›API

ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¤‰æ›APIã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰æ™‚ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æŒ¿å…¥ã€ç–‘ä¼¼SSIã®å®Ÿè£…ã€ãƒ¡ã‚¿ã‚¿ã‚°ã®è¿½åŠ ãªã©ã€ã‚ã‚‰ã‚†ã‚‹ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¤‰æ›ã®ãƒ‹ãƒ¼ã‚ºã«å¯¾å¿œã—ã¾ã™ã€‚

**é‡è¦ãªåŒºåˆ¥:**

ä¸¡æ–¹ã¨ã‚‚åŒã˜ `Transform` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆ`kamado/config`ï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ãŒã€é©ç”¨ç¯„å›²ã¨å‹•ä½œãŒç•°ãªã‚Šã¾ã™ï¼š

- **`devServer.transforms`**: é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰æ™‚ã®ã¿ï¼ˆ`kamado server`ï¼‰ã€å…¨ã¦ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚HTMLã€CSSã€JSã€ç”»åƒãªã©ã€ã‚ã‚‰ã‚†ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã‚’å‡¦ç†ã§ãã‚‹ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢å½¢å¼ã®å¤‰æ›ã§ã™ã€‚`filter` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆinclude/excludeï¼‰ãŒã“ã“ã§æœ‰åŠ¹ã§ã™ã€‚ãƒ“ãƒ«ãƒ‰æ™‚ã«ã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã€‚
- **`def(createPageCompiler(), { transforms })`**: ãƒ“ãƒ«ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã¨é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®ä¸¡æ–¹ã§ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ¸ˆã¿HTMLãƒšãƒ¼ã‚¸ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚HTMLå‡¦ç†å°‚ç”¨ã®å¤‰æ›ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã™ã€‚`filter` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ç„¡è¦–ã•ã‚Œã¾ã™ï¼ˆå…¨ã¦ã®HTMLãƒšãƒ¼ã‚¸ãŒå‡¦ç†ã•ã‚Œã¾ã™ï¼‰ã€‚è©³ç´°ã¯[@kamado-io/page-compiler](../packages/@kamado-io/page-compiler/README.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

åŒã˜Transformé–¢æ•°ï¼ˆ`manipulateDOM()`ã€`prettier()`ã€ã‚«ã‚¹ã‚¿ãƒ Transformãªã©ï¼‰ã‚’ä¸¡æ–¹ã§å†åˆ©ç”¨ã§ãã¾ã™ã€‚

**ä¸»ãªç‰¹å¾´:**

- **é–‹ç™ºæ™‚ã®ã¿**: å¤‰æ›ã¯`serve`ãƒ¢ãƒ¼ãƒ‰ã§ã®ã¿é©ç”¨ã•ã‚Œã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ã¯é©ç”¨ã•ã‚Œã¾ã›ã‚“
- **æŸ”è»Ÿãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**: Globãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆinclude/excludeï¼‰ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- **ã‚¨ãƒ©ãƒ¼è€æ€§**: å¤‰æ›é–¢æ•°ã®ã‚¨ãƒ©ãƒ¼ãŒã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢ã•ã›ã¾ã›ã‚“
- **éåŒæœŸå¯¾å¿œ**: åŒæœŸãƒ»éåŒæœŸä¸¡æ–¹ã®å¤‰æ›é–¢æ•°ã‚’ã‚µãƒãƒ¼ãƒˆ
- **ãƒã‚§ãƒ¼ãƒ³å¯èƒ½**: è¤‡æ•°ã®å¤‰æ›ã‚’é…åˆ—é †ã«é©ç”¨

**è¨­å®šä¾‹:**

```typescript
import path from 'node:path';
import fs from 'node:fs/promises';

import { defineConfig } from 'kamado/config';

export default defineConfig({
	devServer: {
		port: 3000,
		transforms: [
			// ä¾‹1: HTMLã«é–‹ç™ºç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æŒ¿å…¥
			{
				name: 'inject-dev-script',
				filter: {
					include: '**/*.html',
				},
				transform: (content) => {
					if (typeof content !== 'string') {
						const decoder = new TextDecoder('utf-8');
						content = decoder.decode(content);
					}
					return content.replace(
						'</body>',
						'<script src="/__dev-tools.js"></script></body>',
					);
				},
			},

			// ä¾‹2: ç–‘ä¼¼SSIï¼ˆServer Side Includesï¼‰ã®å®Ÿè£…
			{
				name: 'pseudo-ssi',
				filter: {
					include: '**/*.html',
				},
				transform: async (content, ctx) => {
					if (typeof content !== 'string') {
						const decoder = new TextDecoder('utf-8');
						content = decoder.decode(content);
					}

					// <!--#include virtual="/path/to/file.html" --> ã‚’å‡¦ç†
					const includeRegex = /<!--#include virtual="([^"]+)" -->/g;
					let result = content;

					for (const match of content.matchAll(includeRegex)) {
						const includePath = match[1];
						const filePath = path.resolve(
							ctx.context.dir.output,
							includePath.replace(/^\//, ''),
						);

						try {
							const includeContent = await fs.readFile(filePath, 'utf-8');
							result = result.replace(match[0], includeContent);
						} catch (error) {
							console.warn(`Failed to include ${includePath}:`, error);
						}
					}

					return result;
				},
			},

			// ä¾‹3: CSSãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ 
			{
				name: 'css-source-comment',
				filter: {
					include: '**/*.css',
				},
				transform: (content, ctx) => {
					if (typeof content !== 'string') {
						const decoder = new TextDecoder('utf-8');
						content = decoder.decode(content);
					}
					const source = ctx.inputPath || ctx.outputPath;
					return `/* Generated from: ${source} */\n${content}`;
				},
			},
		],
	},
});
```

**ResponseTransformã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹:**

```typescript
interface Transform<M extends MetaData> {
	readonly name: string; // ãƒ‡ãƒãƒƒã‚°ç”¨ã®å¤‰æ›å
	readonly filter?: {
		readonly include?: string | readonly string[]; // ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰ã™ã‚‹Globãƒ‘ã‚¿ãƒ¼ãƒ³
		readonly exclude?: string | readonly string[]; // ã‚¨ã‚¯ã‚¹ã‚¯ãƒ«ãƒ¼ãƒ‰ã™ã‚‹Globãƒ‘ã‚¿ãƒ¼ãƒ³
	};
	readonly transform: (
		content: string | ArrayBuffer,
		context: TransformContext<M>,
	) => Promise<string | ArrayBuffer> | string | ArrayBuffer;
}

interface TransformContext<M extends MetaData> {
	readonly path: string; // ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ã‚¹
	readonly inputPath?: string; // å…ƒã®å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆåˆ©ç”¨å¯èƒ½ãªå ´åˆï¼‰
	readonly outputPath: string; // å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
	readonly outputDir: string; // å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹
	readonly isServe: boolean; // é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã§ã¯å¸¸ã«true
	readonly context: Context<M>; // å®Œå…¨ãªå®Ÿè¡Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
	readonly compile: CompileFunction; // ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹é–¢æ•°
}
```

**ãƒ•ã‚£ãƒ«ã‚¿ã‚ªãƒ—ã‚·ãƒ§ãƒ³:**

- `include`: ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ã‚¹ã«ãƒãƒƒãƒã™ã‚‹Globãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆä¾‹: `'**/*.html'`ã€`['**/*.css', '**/*.js']`ï¼‰
- `exclude`: é™¤å¤–ã™ã‚‹Globãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆä¾‹: `'**/_*.html'`ã§`_`ã§å§‹ã¾ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼‰

**é‡è¦ãªæ³¨æ„äº‹é …:**

- å¤‰æ›é–¢æ•°ã¯`string`ã¾ãŸã¯`ArrayBuffer`ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®å¤‰æ›ã‚’è¡Œã†å ´åˆã¯ã€`TextDecoder`ã‚’ä½¿ã£ã¦`ArrayBuffer`ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ï¼š
  ```typescript
  if (typeof content !== 'string') {
  	const decoder = new TextDecoder('utf-8');
  	content = decoder.decode(content);
  }
  ```
- é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¯¾è±¡å¤–ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã¯é€šå¸¸`ArrayBuffer`ã¨ã—ã¦æ¸¡ã•ã‚Œã‚‹ãŸã‚ã€ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦å‡¦ç†ã™ã‚‹å ´åˆã¯å¿…ãšãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„
- å¤‰æ›é–¢æ•°ã®ã‚¨ãƒ©ãƒ¼ã¯ãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã¾ã™ãŒã€ã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢ã•ã›ã¾ã›ã‚“ï¼ˆå…ƒã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè¿”ã•ã‚Œã¾ã™ï¼‰
- å¤‰æ›ã¯é…åˆ—ã®é †åºã§å®Ÿè¡Œã•ã‚Œã¾ã™
- é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰ï¼ˆ`kamado server`ï¼‰ã§ã®ã¿é©ç”¨ã•ã‚Œã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ã¯é©ç”¨ã•ã‚Œã¾ã›ã‚“

### CLIã‚³ãƒãƒ³ãƒ‰

#### ã‚µã‚¤ãƒˆå…¨ä½“ã®ãƒ“ãƒ«ãƒ‰

```bash
kamado build
```

#### ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’ãƒ“ãƒ«ãƒ‰

```bash
kamado build "path/to/file.pug" # ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ“ãƒ«ãƒ‰
kamado build "path/to/*.css" # CSSãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’ãƒ“ãƒ«ãƒ‰
kamado build "path/to/*.ts" # TypeScriptãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’ãƒ“ãƒ«ãƒ‰
```

#### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
kamado server
```

é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã™ã‚‹ã¨ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸãƒšãƒ¼ã‚¸ãŒã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ã§ãƒ“ãƒ«ãƒ‰ã•ã‚Œã¾ã™ã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚ã‚Œã°ã€ãã®å ´ã§ç„¼ã„ã¦è¿”ã—ã¾ã™ã€‚

### CLIã‚ªãƒ—ã‚·ãƒ§ãƒ³

ã™ã¹ã¦ã®ã‚³ãƒãƒ³ãƒ‰ã§ä»¥ä¸‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã§ã™ï¼š

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³        | çŸ­ç¸®å½¢ | èª¬æ˜                                                                                         |
| ----------------- | ------ | -------------------------------------------------------------------------------------------- |
| `--config <path>` | `-c`   | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã€‚æœªæŒ‡å®šã®å ´åˆã€`kamado.config.js`ã€`kamado.config.ts`ãªã©ã‚’è‡ªå‹•æ¢ç´¢ |
| `--verbose`       |        | è©³ç´°ãªãƒ­ã‚°å‡ºåŠ›ã‚’æœ‰åŠ¹åŒ–                                                                       |

#### ä½¿ç”¨ä¾‹

```bash
# ç‰¹å®šã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨
kamado build --config ./custom.config.ts
kamado server -c ./dev.config.js

# ãƒ“ãƒ«ãƒ‰æ™‚ã«è©³ç´°ãƒ­ã‚°ã‚’å‡ºåŠ›
kamado build --verbose
```
